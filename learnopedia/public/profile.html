<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    <link rel="stylesheet" href="style1.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>
<body>
   
    <div class="main-content">
        <header>
            <h1>MY PROFILE</h1>
            <div class="user-info">
                <p>Welcome back, <span id="user-name">Learner</span></p>
                <button id="my-data-btn">My Data</button>
            </div>
        </header>

        <section class="profile-section">
            <div class="profile-card">
                <div class="profile-header">
                    <img src="default-profile.jpg" alt="Profile Picture" class="profile-pic" id="profile-pic">
                    <button class="upload-btn" onclick="document.getElementById('photo-upload').click();">Upload Photo</button>
                    <input type="file" id="photo-upload" style="display: none;" accept="image/*" onchange="previewPhoto(event)">
                </div>
                <div class="profile-info">
                    <form id="profile-form">
                        <h2>Your Name</h2>
                        <input type="text" name="name" id="name" placeholder="Enter your name">
                        
                        <h2>Email</h2>
                        <input type="email" name="email" id="email" placeholder="Enter your email">
                        
                        <h2>Phone Number</h2>
                        <input type="tel" name="phone" id="phone" placeholder="Enter your phone number">
                        
                        <h2>Age</h2>
                        <input type="number" name="age" id="age" placeholder="Enter your age">
                        
                        <h2>Study</h2>
                        <input type="text" name="study" id="study" placeholder="Enter your study/major">
                        
                        <h2>Date of Birth (DOB)</h2>
                        <input type="date" name="dob" id="dob" placeholder="Enter your date of birth">
                        
                        <button type="submit" class="save-btn">Save Changes</button>
                    </form>
                </div>
            </div>

            <div class="about-info">
                <div class="course-section">
                    <div class="course-card current-course">
                        <h2>Current Course</h2>
                        <h3>JavaScript Basics</h3>
                        <p>Progress: 70%</p>
                        <div class="progress-bar">
                            <div class="progress" style="width: 70%;"></div>
                        </div>
                        <button class="continue-btn">Continue Course</button>
                    </div>
                
                    <div class="course-card completed-course">
                        <h2>Previous completed course</h2>
                        <h3>Introduction to Python</h3>
                        <p>Completed</p>
                        <button class="certificate-btn">Download Certificate</button>
                    </div>
                </div>
            </div>
            
            <div class="legal-info">
                <h1>Certificates</h1>
                <div class="certificate-section">
                    <div class="certificate-card">
                        <div class="certificate-info">
                            <h3>Introduction to Python</h3>
                            <p>Completed on: October 12, 2024</p>
                        </div>
                        <div class="certificate-actions">
                            <button class="view-btn">View</button>
                            <button class="download-btn">Download</button>
                            <button class="share-btn">more....</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="professional-card">
                <h1>Badges</h1>
                <div class="badge-section-inline">
                    <div class="badge-inline">
                        <span class="badge-icon">üèÖ</span>
                        <a href="quizindex.html"><span class="badge-title">Quiz Master</span></a>
                    </div>
                
                    <div class="badge-inline">
                        <span class="badge-icon">üìö</span>
                        <span class="badge-title">Dedicated Learner</span>
                    </div>
                
                    <div class="badge-inline">
                        <span class="badge-icon">üåü</span>
                        <span class="badge-title">Top Performer</span>
                    </div>
                
                    <div class="badge-inline">
                        <span class="badge-icon">üèÜ</span>
                        <span class="badge-title">Course Completer</span>
                    </div>
                </div>
                
                <div class="download-notes-section">
                    <h2>Download Notes</h2>
                    <div class="note-card">
                        <div class="note-content">
                            <h3>Week 1 - Introduction to JavaScript</h3>
                            <p>Basics of JavaScript syntax, variables, and data types.</p>
                        </div>
                        <button class="download-btn">
                            <span class="download-icon">‚¨áÔ∏è</span> Download
                        </button>
                    </div>
                
                    <div class="note-card">
                        <div class="note-content">
                            <h3>Week 2 - Functions and Scope</h3>
                            <p>Understanding functions, scope, and closures in JavaScript.</p>
                        </div>
                        <button class="download-btn">
                            <span class="download-icon">‚¨áÔ∏è</span> Download
                        </button>
                    </div>
                
                    <div class="note-card">
                        <div class="note-content">
                            <h3>Week 3 - DOM Manipulation</h3>
                            <p>Learn to interact with HTML elements using the Document Object Model.</p>
                        </div>
                        <button class="download-btn">
                            <span class="download-icon">‚¨áÔ∏è</span> Download
                        </button>
                    </div>
                </div>
                
                <h2>Payment History</h2>
                <div class="payment-history-section">
                    <div class="payment-card">
                        <h3>Course: JavaScript Basics</h3>
                        <p>Purchase Date: Aug 10, 2024</p>
                        <p>Amount: ‚Çπ3500</p>
                    </div>
                
                    <div class="payment-card">
                        <h3>Course: Introduction to Python</h3>
                        <p>Purchase Date: July 15, 2024</p>
                        <p>Amount: ‚Çπ4500</p>
                    </div>
                    <div class="payment-card hidden">
                        <h3>Course: Advanced Python</h3>
                        <p>Purchase Date: Feb 15, 2024</p>
                        <p>Amount: ‚Çπ4500</p>
                    </div>
                
                    <div class="payment-card hidden">
                        <h3>Course: Web Development Bootcamp</h3>
                        <p>Purchase Date: Mar 20, 2024</p>
                        <p>Amount: ‚Çπ2500</p>
                    </div>
                    <button id="show-more-btn" onclick="toggleHistory()">Show More</button>
                </div>
            </div>
        </section>
    </div>

    
    <script>
   // Function to update username display
function updateUsername(name) {
    const userNameSpan = document.getElementById('user-name');
    if (userNameSpan) {
        userNameSpan.textContent = name;
    }
}

// Function to preview uploaded photo
function previewPhoto(event) {
    const file = event.target.files[0];
    const reader = new FileReader();
    
    reader.onload = function() {
        const img = document.getElementById('profile-pic');
        img.src = reader.result;
        localStorage.setItem('profilePic', reader.result); // Store profile picture in localStorage
    }

    if (file) {
        reader.readAsDataURL(file);
    }
}

// Save profile form data to localStorage
document.getElementById('profile-form').addEventListener('submit', function(e) {
    e.preventDefault();

    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const phone = document.getElementById('phone').value;
    const age = document.getElementById('age').value;
    const study = document.getElementById('study').value;
    const dob = document.getElementById('dob').value;

    localStorage.setItem('userName', name);
    localStorage.setItem('userEmail', email);
    localStorage.setItem('userPhone', phone);
    localStorage.setItem('userAge', age);
    localStorage.setItem('userStudy', study);
    localStorage.setItem('userDob', dob);

    updateUsername(name); // Update displayed username
});

// Load stored data on page load
window.onload = function() {
    const name = localStorage.getItem('userName') || "Guest";
    updateUsername(name);
    document.getElementById('name').value = name || "";
    document.getElementById('email').value = localStorage.getItem('userEmail') || "";
    document.getElementById('phone').value = localStorage.getItem('userPhone') || "";
    document.getElementById('age').value = localStorage.getItem('userAge') || "";
    document.getElementById('study').value = localStorage.getItem('userStudy') || "";
    document.getElementById('dob').value = localStorage.getItem('userDob') || "";
    document.getElementById('profile-pic').src = localStorage.getItem('profilePic') || "default-profile.jpg";
};

// Enhanced PDF generation function with styles
document.getElementById('my-data-btn').addEventListener('click', function() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const name = localStorage.getItem('userName') || "N/A";
    const email = localStorage.getItem('userEmail') || "N/A";
    const phone = localStorage.getItem('userPhone') || "N/A";
    const age = localStorage.getItem('userAge') || "N/A";
    const study = localStorage.getItem('userStudy') || "N/A";
    const dob = localStorage.getItem('userDob') || "N/A";
    const profilePic = localStorage.getItem('profilePic');

    // Title
    doc.setFontSize(18);
    doc.setTextColor(0, 102, 204); // Blue color
    doc.text("User Profile Data", 105, 20, { align: 'center' });

    // Draw line below title
    doc.setLineWidth(0.5);
    doc.line(30, 25, 180, 25);

    // Content layout: User data first, profile picture last
    const leftX = 30;
    const leftY = 40;
    
    // Add the profile details first (left side)
    doc.setFontSize(12);
    doc.setTextColor(0, 0, 0); // Black color

    doc.setFont("helvetica", "bold");
    doc.text("Name:", leftX, leftY);
    doc.setFont("helvetica", "normal");
    doc.setTextColor(51, 51, 255); // Dark blue
    doc.text(name, leftX + 50, leftY);

    doc.setFont("helvetica", "bold");
    doc.setTextColor(0, 0, 0);
    doc.text("Email:", leftX, leftY + 10);
    doc.setFont("helvetica", "normal");
    doc.setTextColor(34, 139, 34); // Green
    doc.text(email, leftX + 50, leftY + 10);

    doc.setFont("helvetica", "bold");
    doc.setTextColor(0, 0, 0);
    doc.text("Phone:", leftX, leftY + 20);
    doc.setFont("helvetica", "normal");
    doc.setTextColor(255, 69, 0); // Orange-red
    doc.text(phone, leftX + 50, leftY + 20);

    doc.setFont("helvetica", "bold");
    doc.setTextColor(0, 0, 0);
    doc.text("Age:", leftX, leftY + 30);
    doc.setFont("helvetica", "normal");
    doc.setTextColor(0, 191, 255); // Sky blue
    doc.text(age, leftX + 50, leftY + 30);

    doc.setFont("helvetica", "bold");
    doc.setTextColor(0, 0, 0);
    doc.text("Study:", leftX, leftY + 40);
    doc.setFont("helvetica", "normal");
    doc.setTextColor(255, 105, 180); // Pink
    doc.text(study, leftX + 50, leftY + 40);

    doc.setFont("helvetica", "bold");
    doc.setTextColor(0, 0, 0);
    doc.text("Date of Birth:", leftX, leftY + 50);
    doc.setFont("helvetica", "normal");
    doc.setTextColor(255, 140, 0); // Dark orange
    doc.text(dob, leftX + 50, leftY + 50);

    // Add profile image at the bottom center after all data
    const imgSize = 30; // Size of the profile image
    const centerX = 105 - imgSize / 2; // Centering image horizontally

    if (profilePic) {
        const img = new Image();
        img.onload = function() {
            doc.addImage(img, 'JPEG', centerX, leftY + 60, imgSize, imgSize); // Position image at the bottom center
            doc.save('profile-data.pdf');
        };
        img.src = profilePic;
    } else {
        doc.save('profile-data.pdf'); // Save PDF without image if profilePic is missing
    }
});


    </script>


</body>
</html>
